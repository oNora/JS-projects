<!DOCTYPE html>
<html>
	<head>
	<meta charset="utf-8">
	<title></title>
	<style type="text/css">
		*{
			margin: 0px;
			padding: 0px;
		}
		#wrapper{
			width: 90%;
			height: auto;
			background: rgba(105, 199, 115, 0.5);
			text-align: center;
			padding: 25px;
			margin: 5px;
		}

		#drop_zone{
			width: 99%;
			height: 60px;
			border: 3px dotted #fff;
			margin-bottom: 20px;
			padding-top: 15px;
		}

		#list ul{
			width: 95%;
			margin-left: 20px;
		}
		#list li {
			border-bottom: 1px solid #000;
			margin-bottom: 5px;
		}
	</style>
	</head>
	<body>

		<div id='wrapper'>
			<div id="drop_zone">Drop files here <br/>(work for plain text with Latin letters and images)</div>
			<output id="list"></output>
		</div>
		<script>
			var output = [];
			function readFile(file) {
				var reader = new FileReader();
				reader.onloadend = function(evt) {
				for (var i = 0, f; f = file[i]; i++) {
					var viewFile = f.type == "text/plain" ? '<p>'+evt.target.result+'</p>' : '<img class="thumb" src="' + evt.target.result + '"/>'
					output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
									f.size, ' bytes, last modified: ',
									f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
									'<br/>'+viewFile+'</li>');
					}
					document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
				};
				if (file[0].type == 'text/plain') {
					reader.readAsBinaryString(file[0], 'windows-1251');
				} else {
					reader.readAsDataURL(file[0]);
				}
			};


			function handleFileSelect(evt) {
				evt.stopPropagation();
				evt.preventDefault();

				var files = evt.dataTransfer.files; // FileList object.
				readFile(files);
			}

			function handleDragOver(evt) {
			evt.stopPropagation();
			evt.preventDefault();
			evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.
			}

			// Setup the dnd listeners.
			var dropZone = document.getElementById('drop_zone');
			dropZone.addEventListener('dragover', handleDragOver, false);
			dropZone.addEventListener('drop', handleFileSelect, false);
		</script>
	</body>
</html>